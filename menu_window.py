# –Ü–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤ —ñ–∑ PyQt5
from PyQt5.QtWidgets import QWidget, QLabel, QPushButton, QVBoxLayout, QListWidget


# –Ü–º–ø–æ—Ä—Ç –∫–ª–∞—Å—É Qt –¥–ª—è –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
from PyQt5.QtCore import Qt


# –Ü–º–ø–æ—Ä—Ç —Å–ø–∏—Å–∫—É –ø–∏—Ç–∞–Ω—å —ñ–∑ –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª—É
from main import questions


# –û–≥–æ–ª–æ—à–µ–Ω–Ω—è –∫–ª–∞—Å—É –≤—ñ–∫–Ω–∞ –º–µ–Ω—é, —è–∫–∏–π –Ω–∞—Å–ª—ñ–¥—É—î QWidget
class MenuWindow(QWidget):
    # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—É, –æ—Ç—Ä–∏–º—É—î –≥–æ–ª–æ–≤–Ω–µ –≤—ñ–∫–Ω–æ –≥—Ä–∏
    def __init__(self, main_window):
        super().__init__()              # –í–∏–∫–ª–∏–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –∫–ª–∞—Å—É QWidget
        self.main_window = main_window  # –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≥–æ–ª–æ–≤–Ω–µ –≤—ñ–∫–Ω–æ
        self.setWindowTitle("–ú–µ–Ω—é")     # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—ñ–∫–Ω–∞
        self.resize(500, 500)           # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–∑–º—ñ—Ä –≤—ñ–∫–Ω–∞


        # ---------- –ó–∞–≥–æ–ª–æ–≤–æ–∫ ----------
        self.lb_title = QLabel("üìö –ú–µ–Ω—é")               # –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–∞–ø–∏—Å –∑–∞–≥–æ–ª–æ–≤–∫–∞
        self.lb_title.setAlignment(Qt.AlignCenter)       # –í–∏—Ä—ñ–≤–Ω—é—î–º–æ —Ç–µ–∫—Å—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É
        self.lb_title.setStyleSheet("font-size: 20px;")  # –ó–∞–¥–∞—î–º–æ —Ä–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É


        # ---------- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ----------
        self.lb_stats = QLabel()        # –ù–∞–ø–∏—Å –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        self.update_stats()             # –ó–∞–ø–æ–≤–Ω—é—î–º–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Ç–æ—á–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏


        # ---------- –°–ø–∏—Å–æ–∫ –ø–∏—Ç–∞–Ω—å ----------
        self.list_questions = QListWidget() # –í—ñ–¥–∂–µ—Ç —Å–ø–∏—Å–∫—É –ø–∏—Ç–∞–Ω—å
        self.update_question_list()         # –ó–∞–ø–æ–≤–Ω—é—î–º–æ —Å–ø–∏—Å–æ–∫ –ø–∏—Ç–∞–Ω–Ω—è–º–∏


        # ---------- –ö–Ω–æ–ø–∫–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è ----------
        self.btn_back = QPushButton("üîô –ù–∞–∑–∞–¥ –¥–æ –≥—Ä–∏")     # –ö–Ω–æ–ø–∫–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –≥—Ä–∏
        self.btn_back.clicked.connect(self.back_to_main)  # –ü—Ä–∏–≤'—è–∑—É—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è


        # ---------- Layout ----------
        layout = QVBoxLayout()          # –°—Ç–≤–æ—Ä—é—î–º–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–π –º–∞–∫–µ—Ç


        layout.addWidget(self.lb_title)                 # –î–æ–¥–∞—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —É –º–∞–∫–µ—Ç
        layout.addWidget(self.lb_stats)                 # –î–æ–¥–∞—î–º–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        layout.addWidget(QLabel("üìã –°–ø–∏—Å–æ–∫ –ø–∏—Ç–∞–Ω—å:"))   # –î–æ–¥–∞—î–º–æ –ø—ñ–¥–ø–∏—Å –¥–æ —Å–ø–∏—Å–∫—É
        layout.addWidget(self.list_questions)           # –î–æ–¥–∞—î–º–æ —Å–ø–∏—Å–æ–∫ –ø–∏—Ç–∞–Ω—å


        layout.addStretch()                             # –î–æ–¥–∞—î–º–æ —Ä–æ–∑—Ç—è–≥—É–≤–∞–Ω–Ω—è (–≤—ñ–¥—Å—Ç—É–ø)
        layout.addWidget(self.btn_back)                 # –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è


        self.setLayout(layout)          # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –º–∞–∫–µ—Ç –¥–ª—è –≤—ñ–∫–Ω–∞


    def update_stats(self):
        # –°—Ç–≤–æ—Ä—é—î–º–æ –∑–º—ñ–Ω–Ω—É –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤—Å—ñ—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
        total_asked = 0
        # –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –∫–æ–∂–Ω–æ–º—É –ø–∏—Ç–∞–Ω–Ω—é –∑—ñ —Å–ø–∏—Å–∫—É questions
        for q in questions:
            # –î–æ–¥–∞—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–∞–∑—ñ–≤, –∫–æ–ª–∏ —Ü–µ –ø–∏—Ç–∞–Ω–Ω—è –∑–∞–¥–∞–≤–∞–ª–∏
            total_asked = total_asked + q.count_asked
        # –°—Ç–≤–æ—Ä—é—î–º–æ –∑–º—ñ–Ω–Ω—É –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
        total_right = 0
        # –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –∫–æ–∂–Ω–æ–º—É –ø–∏—Ç–∞–Ω–Ω—é –∑—ñ —Å–ø–∏—Å–∫—É questions
        for q in questions:
            # –î–æ–¥–∞—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –¥–ª—è —Ü—å–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è
            total_right = total_right + q.count_right




        # –í–∏–≤–æ–¥–∏–º–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –Ω–∞–ø–∏—Å
        self.lb_stats.setText(f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–í—Å—å–æ–≥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: {total_asked}\n–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö: {total_right}")


    def update_question_list(self):
        # –û—á–∏—â–∞—î–º–æ —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
        self.list_questions.clear()
        # –î–æ–¥–∞—î–º–æ –∫–æ–∂–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è –∑—ñ —Å–ø–∏—Å–∫—É questions
        for q in questions:
            self.list_questions.addItem(q.question)


    def back_to_main(self):
        # –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –≤—ñ–∫–Ω–æ –º–µ–Ω—é
        self.close()
        # –ü–æ–∫–∞–∑—É—î–º–æ –≥–æ–ª–æ–≤–Ω–µ –≤—ñ–∫–Ω–æ –≥—Ä–∏
        self.main_window.show()

